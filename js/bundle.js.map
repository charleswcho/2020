{"version":3,"sources":["webpack/bootstrap 3292d2e154000c32e6ea","./js/main.js","./js/lib/view.js","./js/lib/game.js","./js/lib/board.js","./js/lib/moveError.js","./js/lib/tile.js","./js/lib/nullTile.js","./js/lib/tray.js","./js/lib/shape.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACPD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA,IAAG;AACH,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,IAAG;AACH,gBAAe;AACf,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAgC,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3MA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,QAAQ;AACzB;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;;AAEA;AACA,uBAAsB,YAAY;AAClC,yBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9DA;AACA;AACA;;AAEA;;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACNA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;AC3BA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3292d2e154000c32e6ea\n **/","var View = require('./lib/view');\nvar Game = require('./lib/game');\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  var rootEl = $('.2020');\n  var game = new Game();\n  window.view = new View(game, rootEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var View = function (game, $el) {\n  this.game = game;\n  this.board = game.board;\n  this.$el = $el;\n  this.valid = true;\n  this.grid = [];\n  this.setupBoard();\n  this.setupPieceTray();\n};\n\nView.prototype.setupBoard = function () {\n  var self = this;\n  var $ul = $(\"<ul>\").addClass(\"group\");\n\n  this.board.grid.forEach(function (row, rowIdx) {\n    row.forEach(function (tile, tileIdx) {\n      var $li = $(\"<li>\");\n      $li.data(\"pos\", [rowIdx, tileIdx]);\n      self.addDroppableListener($li);\n      $ul.append($li);\n    });\n  });\n\n  this.$el.append($ul);\n};\n\nView.prototype.addDroppableListener = function ($li) {\n  var self = this;\n  $li.droppable({\n    tolerance: 'pointer',\n    drop: function (e, ui) {\n      self.valid = true;\n      self.listItems = [];\n      self.validMove($(this).data('pos'));\n      if (self.valid) {\n        self.renderFullShape($(ui.draggable[0]).data('color'));\n        self.placeShape();\n      }\n    },\n  });\n};\n\nView.prototype.placeShape = function (listItem) {\n  this.game.playMove();\n  this.setupPieceTray();\n  this.game.score += 7\n  $('.score').html('<p>Score: ' + this.game.score + '</p>');\n};\n\nView.prototype.transformCoords = function (startPos, coords) {\n  this.transformedCoords = coords.map(function (pos) {\n    return [startPos[0]+pos[0], startPos[1]+pos[1]];\n  });\n};\n\nView.prototype.renderFullShape = function (color) {\n  this.listItems.forEach(function ($li) {\n    $li.css('background', color);\n    $li.data('color', color);\n    $li.addClass('piece')\n  });\n  this.horizontals();\n  this.verticals();\n};\n\nView.prototype.validMove = function (startPos) {\n  var self = this;\n  var coords = this.game.tray.shape.coords;\n  this.transformCoords(startPos, coords);\n  this.transformedCoords.forEach(function (pos) {\n    $('.group > li').each(function (idx, li) {\n      var $li = $(li);\n      if (($li.data('pos').equals(pos)) && ($li.data('color') !== undefined)) {\n        self.valid = false;\n      } else if ($li.data('pos').equals(pos)) {\n        self.listItems.push($li);\n      }\n    });\n  });\n};\n\nView.prototype.verticals = function () {\n  var self = this;\n  var grid = this.grid;\n  var cols = grid[0].map(function(col, i) {\n    return grid.map(function(row) {\n        return row[i];\n    });\n  });\n  cols.forEach(function (row) {\n    if (self.full(row)) {\n      self.clear(row);\n    }\n  });\n};\n\nView.prototype.horizontals = function () {\n  this.grid = [];\n  var self = this;\n  var row = [];\n  $('.group > li').each(function (idx, li) {\n    var $li = $(li);\n    row.push($li[0]);\n    if (row.length === 10) {\n      if (self.full(row)) {\n        self.clear(row);\n      }\n      self.grid.push(row);\n      row = [];\n    }\n  });\n};\n\nView.prototype.full = function (arr) {\n  var full = true;\n  arr.forEach(function (li) {\n    var $li = $(li);\n    if ($li.data('color') === undefined) {\n      full = false;\n    }\n  });\n  return full;\n};\n\nView.prototype.clear = function (arr) {\n  this.game.score += 93\n  var self = this;\n  arr.forEach(function (li) {\n    var $li = $(li);\n    $li.animate({ 'background-color': '#ccc' }, 500, function() {\n      $li.removeAttr('style');\n      $li.removeData('color');\n      $li.removeClass('piece');\n\t\t});\n  });\n\n  return true;\n};\n\nView.prototype.setupPieceTray = function () {\n  var self = this;\n  $('.tray').remove();\n  var tray = this.game.tray;\n  var $ul = $(\"<ul>\");\n  $ul.addClass(\"tray\");\n\n  tray.grid.forEach(function (row, rowIdx) {\n    row.forEach(function (tile, tileIdx) {\n      var $li = $(\"<li>\");\n      if (!tile.empty) {\n        $li.data(\"color\", tile.color);\n        $li.css('background', tile.color);\n        $li.addClass(\"piece\");\n      }\n\n      $li.data(\"pos\", [rowIdx, tileIdx]);\n      $ul.append($li);\n    });\n  });\n\n  this.$el.append($ul);\n  this.addDraggableListener();\n};\n\nView.prototype.addDraggableListener = function () {\n  $('.tray > li.piece').draggable({\n    cursor: 'pointer',\n    revert: false,\n    helper: function(e) {\n      var helperList = $('<ul class=\"draggable-helper\">');\n      helperList.append($('.tray > li').clone());\n      return helperList;\n    },\n    drag: function (e, ui) {\n      $('.tray > li.piece').css('visibility', 'hidden');\n    },\n\n    stop: function(e, ui) {\n      if (!this.validMove) {\n        $('.tray > li.piece').css('visibility', 'visible');\n      }\n\t\t},\n    cursorAt: { top: 40 }\n  });\n};\n\nArray.prototype.equals = function (array) {\n  if (!array)\n      return false;\n  if (this.length != array.length)\n      return false;\n  for (var i = 0, l=this.length; i < l; i++) {\n      if (this[i] instanceof Array && array[i] instanceof Array) {\n          if (!this[i].equals(array[i]))\n              return false;\n      }\n      else if (this[i] != array[i]) {\n          return false;\n      }\n  }\n  return true;\n}\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Board = require(\"./board\");\nvar Tray = require(\"./tray\");\nvar MoveError = require(\"./moveError\");\n\nfunction Game () {\n  this.board = new Board();\n  this.tray = new Tray();\n  this.score = 0;\n}\n\nGame.prototype.isOver = function () {\n  return this.board.isOver();\n};\n\nGame.prototype.playMove = function () {\n  // this.board.placeShape(this.tray.shape);\n  this.tray = new Tray();\n};\n\nGame.prototype.run = function (gameCompletionCallback) {\n\n};\n\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/game.js\n ** module id = 2\n ** module chunks = 0\n **/","var MoveError = require(\"./moveError\");\nvar Tile = require('./tile');\nvar NullTile = require('./nullTile');\n\nfunction Board () {\n  this.grid = Board.makeGrid();\n}\n\nBoard.makeGrid = function () {\n  var grid = [];\n  for (var i = 0; i < 10; i++) {\n    grid.push([]);\n    for (var j = 0; j < 10; j++) {\n      grid[i].push(new NullTile([i,j], null));\n    }\n  }\n  return grid;\n};\n\nBoard.validPos = function (pos) {\n  return (\n    (0 <= pos[0]) && (pos[0] < 10) && (0 <= pos[1]) && (pos[1] < 10)\n  );\n};\n\nBoard.prototype.placeShape = function (shape) {\n  var coords = shape.coords;\n  if (this.emptyCoords(coords)) {\n    coords.forEach(function (row, rowIdx) {\n      row.forEach(function (tile, tileIdx) {\n        tile = new Tile([rowIdx, tileIdx], shape.color);\n      });\n    });\n  }\n};\n\nBoard.prototype.emptyCoords = function (coords) {\n  var self = this;\n  coords.forEach(function (row, rowIdx) {\n    row.forEach(function (tile, tileIdx) {\n      if (Board.validPos([rowIdx, tileIdx])) {\n        var tile = self.grid[rowIdx][tileIdx];\n        if (tile.empty) {\n          return false;\n        }\n      }\n    });\n  });\n  return true;\n};\n\nBoard.prototype.isOver = function () {\n  for (var rowIdx = 0; rowIdx < 3; rowIdx++) {\n    for (var colIdx = 0; colIdx < 3; colIdx++) {\n      if (this.isEmptyPos([rowIdx, colIdx])) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/board.js\n ** module id = 3\n ** module chunks = 0\n **/","function MoveError (msg) {\n  this.msg = msg;\n}\n\nmodule.exports = MoveError;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/moveError.js\n ** module id = 4\n ** module chunks = 0\n **/","function Tile (pos, color) {\n  this.pos = pos;\n  this.color = color;\n  this.empty = false;\n};\n\nmodule.exports = Tile;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/tile.js\n ** module id = 5\n ** module chunks = 0\n **/","function NullTile (pos, color) {\n  this.pos = pos;\n  this.color = color;\n  this.empty = true;\n};\n\nmodule.exports = NullTile;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/nullTile.js\n ** module id = 6\n ** module chunks = 0\n **/","var Shape = require('./shape');\nvar Tile = require('./tile');\nvar NullTile = require('./nullTile');\n\nfunction Tray () {\n  this.grid = Tray.makeGrid();\n  this.shape = new Shape();\n  this.placeShape(this.shape);\n}\n\nTray.makeGrid = function () {\n  var grid = [];\n  for (var i = 0; i < 5; i++) {\n    grid.push([]);\n    for (var j = 0; j < 5; j++) {\n      grid[i].push(new NullTile([i,j], null));\n    }\n  }\n  return grid;\n};\n\nTray.prototype.placeShape = function (shape) {\n  shape.coords.forEach(function (pos) {\n    this.grid[pos[0]][pos[1]] = new Tile(pos, shape.color);\n  }.bind(this));\n};\n\nmodule.exports = Tray;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/tray.js\n ** module id = 7\n ** module chunks = 0\n **/","Array.prototype.random = function () {\n  return this[Math.floor(Math.random() * this.length)];\n}\n\nvar SHAPES = ['dot', 'sSquare', 'lSquare','lelbow3', 'lelbow5', 'relbow3', 'relbow5','horizontal2', 'horizontal3', 'horizontal4', 'horizontal5',\n  'vertical2', 'vertical3', 'vertical4', 'vertical5'\n];\n\nvar COLORS = ['#FFB5E8', '#FF9CEE', '#F6A6FF', '#B28DFF', '#C5A3FF', '#D5AAFF', '#B5B9FF', '#AFCBFF', '#AFF8DB', '#85E3FF', '#ACE7FF', '#6EB5FF', '#BFFCC6', '#E7FFAC', '#FFC9DE', '#FFBEBC', '#FFABAB', '#FFF5BA'];\n\nfunction Shape () {\n\tthis.type = SHAPES.random();\n\tthis.color = COLORS.random();\n\tthis.render();\n};\n\nShape.prototype.render = function() {\n  switch (this.type) {\n    case 'dot':\n      this.coords = [[0,0]];\n      break;\n    case 'sSquare':\n      this.coords = [[0,0], [0,1], [1,0], [1,1]];\n      break;\n    case 'lSquare':\n      this.coords = [[0,0], [1,0], [2,0], [0,1], [1,1], [2,1], [0,2], [1,2], [2,2]];\n      break;\n    case 'lelbow3':\n      this.coords = [[0,0], [1,0], [1,1]];\n      break;\n    case 'lelbow5':\n      this.coords = [[0,0], [1,0], [2,0], [2,1], [2,2]];\n      break;\n    case 'relbow3':\n      this.coords = [[0,0], [0,1], [1,1]];\n      break;\n    case 'relbow5':\n      this.coords = [[0,0], [0,1], [0,2], [1,2], [2,2]];\n      break;\n    case 'horizontal2':\n      this.coords = [[0,0], [1,0]];\n      break;\n    case 'horizontal3':\n      this.coords = [[0,0], [1,0], [2,0]];\n      break;\n    case 'horizontal4':\n      this.coords = [[0,0], [1,0], [2,0], [3,0]];\n      break;\n    case 'horizontal5':\n      this.coords = [[0,0], [1,0], [2,0], [3,0], [4,0]];\n      break;\n    case 'vertical2':\n      this.coords = [[0,0], [0,1]];\n      break;\n    case 'vertical3':\n      this.coords = [[0,0], [0,1], [0,2]];\n      break;\n    case 'vertical4':\n      this.coords = [[0,0], [0,1], [0,2], [0,3]];\n      break;\n    case 'vertical5':\n      this.coords = [[0,0], [0,1], [0,2], [0,3], [0,4]];\n      break;\n  }\n};\n\nmodule.exports = Shape;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/lib/shape.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}